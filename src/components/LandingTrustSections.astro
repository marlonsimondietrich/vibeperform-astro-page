---
import {
  BadgeCheck,
  Lightbulb,
  Rocket,
  ShieldCheck,
} from "lucide-static";
import {
  landingHighlightsContent,
  type LandingIconKey,
  type LandingLocale,
} from "../data/landingHighlights";

interface Props {
  locale: LandingLocale;
}

const iconMap: Record<
  Extract<LandingIconKey, "rocket" | "badgeCheck" | "lightbulb" | "shieldCheck">,
  string
> = {
  rocket: Rocket,
  badgeCheck: BadgeCheck,
  lightbulb: Lightbulb,
  shieldCheck: ShieldCheck,
};

const renderIcon = (key: keyof typeof iconMap, className: string) =>
  iconMap[key]
    .replace('class="lucide', `class="lucide ${className}`)
    .replace('width="24"', 'width="24"')
    .replace('height="24"', 'height="24"');

const { locale } = Astro.props as Props;
const currentLocale: LandingLocale = locale === "de" ? "de" : "en";
const t = landingHighlightsContent[currentLocale];
---

<section class="section-spacing bg-white" aria-labelledby="landing-results-heading">
  <div class="container-responsive space-y-8">
    <div class="space-y-3 text-center">
      <h2
        id="landing-results-heading"
        class="text-3xl font-semibold text-slate-900 sm:text-4xl"
      >
        {t.results.heading}
      </h2>
    </div>
    <div class="grid gap-6 md:grid-cols-3">
      {t.results.items.map((item) => (
        <article class="flex h-full flex-col items-center rounded-2xl border border-slate-200 bg-white p-6 text-center shadow-sm transition hover:-translate-y-0.5 hover:shadow-md">
          <div class="inline-flex h-12 w-12 items-center justify-center rounded-xl bg-purple-100 text-purple-600">
            <span aria-hidden="true" set:html={renderIcon(item.icon, "h-6 w-6")} />
          </div>
          <h3 class="mt-6 text-lg font-semibold text-slate-900">
            {item.title}
          </h3>
          <p class="mt-3 text-sm text-slate-600 sm:text-base">
            {item.description}
          </p>
        </article>
      ))}
    </div>
  </div>
</section>

<section class="section-spacing bg-slate-50" aria-labelledby="landing-security-heading">
  <div class="container-responsive">
    <div class="grid gap-6 rounded-3xl border border-slate-200 bg-white p-8 shadow-sm sm:grid-cols-[auto,1fr] sm:items-start">
      <div class="inline-flex h-16 w-16 items-center justify-center rounded-2xl bg-purple-100 text-purple-600">
        <span aria-hidden="true" set:html={renderIcon("shieldCheck", "h-8 w-8")} />
      </div>
      <div class="space-y-4">
        <h2
          id="landing-security-heading"
          class="text-2xl font-semibold text-slate-900 sm:text-3xl"
        >
          {t.security.heading}
        </h2>
        {t.security.body.map((paragraph) => (
          <p class="text-sm text-slate-600 sm:text-base">
            {paragraph}
          </p>
        ))}
        <p class="text-sm font-semibold text-purple-600 sm:text-base">
          {t.security.highlight}
        </p>
      </div>
    </div>
  </div>
</section>

<section class="section-spacing bg-white" aria-labelledby="landing-audience-heading">
  <div class="container-responsive space-y-6 text-center">
    <h2
      id="landing-audience-heading"
      class="text-3xl font-semibold text-slate-900 sm:text-4xl"
    >
      {t.audience.heading}
    </h2>
    <p class="mx-auto max-w-3xl text-sm text-slate-600 sm:text-base">
      {t.audience.description}
    </p>
  </div>
</section>

<section class="section-spacing bg-slate-50" aria-labelledby="landing-next-steps-heading">
  <div class="container-responsive space-y-6">
    <div class="space-y-3 text-center">
      <h2
        id="landing-next-steps-heading"
        class="text-3xl font-semibold text-slate-900 sm:text-4xl"
      >
        {t.nextSteps.heading}
      </h2>
    </div>
    <div class="rounded-3xl border border-slate-200 bg-white p-8 shadow-sm">
      <ul class="space-y-5 text-left">
        {t.nextSteps.steps.map((step) => (
          <li class="flex gap-3">
            <div class="mt-1 inline-flex h-6 w-6 flex-shrink-0 items-center justify-center rounded-full bg-purple-100 text-purple-600">
              <span aria-hidden="true" set:html={renderIcon("badgeCheck", "h-3.5 w-3.5")} />
            </div>
            <div class="space-y-1.5">
              <p class="text-base font-semibold text-slate-900">
                {step.title}
              </p>
              <p class="text-sm text-slate-600 sm:text-base">
                {step.description}
              </p>
            </div>
          </li>
        ))}
      </ul>
      <div class="mt-8 flex justify-center">
        <a
          href={t.nextSteps.ctaHref}
          class="inline-flex items-center justify-center rounded-full bg-purple-500 px-6 py-3 text-sm font-semibold text-white transition hover:bg-purple-600 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-purple-500 sm:text-base"
        >
          {t.nextSteps.ctaLabel}
        </a>
      </div>
    </div>
  </div>
</section>
