---
import { ShieldCheck } from "lucide-static";
import {
  landingHighlightsContent,
  type LandingIconKey,
  type LandingLocale,
} from "../data/landingHighlights";

interface Props {
  locale: LandingLocale;
}

const iconMap: Record<
  Extract<LandingIconKey, "shieldCheck">,
  string
> = {
  shieldCheck: ShieldCheck,
};

const renderIcon = (key: keyof typeof iconMap, className: string) =>
  iconMap[key]
    .replace('class="lucide', `class="lucide ${className}`)
    .replace('width="24"', 'width="24"')
    .replace('height="24"', 'height="24"');

const { locale } = Astro.props as Props;
const currentLocale: LandingLocale = locale === "de" ? "de" : "en";
const t = landingHighlightsContent[currentLocale];
---

<section class="section-spacing bg-white" aria-labelledby="landing-security-heading">
  <div class="container-responsive">
    <div class="grid gap-6 rounded-3xl border border-slate-200 bg-white p-8 shadow-sm sm:grid-cols-[auto,1fr] sm:items-start">
      <div class="inline-flex h-16 w-16 items-center justify-center rounded-2xl bg-purple-100 text-purple-600">
        <span aria-hidden="true" set:html={renderIcon("shieldCheck", "h-8 w-8")} />
      </div>
      <div class="space-y-4">
        <h2
          id="landing-security-heading"
          class="text-2xl font-semibold text-slate-900 sm:text-3xl"
        >
          {t.security.heading}
        </h2>
        {t.security.body.map((paragraph) => (
          <p class="text-sm text-slate-600 sm:text-base">
            {paragraph}
          </p>
        ))}
        <p class="text-sm font-semibold text-purple-600 sm:text-base">
          {t.security.highlight}
        </p>
      </div>
    </div>
  </div>
</section>

<section class="section-spacing bg-slate-50" aria-labelledby="landing-audience-heading">
  <div class="container-responsive space-y-6 text-center">
    <h2
      id="landing-audience-heading"
      class="text-3xl font-semibold text-slate-900 sm:text-4xl"
    >
      {t.audience.heading}
    </h2>
    <p class="mx-auto max-w-3xl text-sm text-purple-600 sm:text-base">
      {t.audience.description}
    </p>
  </div>
</section>
