---
interface Props {
	href?: string;
	target?: string;
	rel?: string;
}

const { href, target, rel } = Astro.props as Props;
const baseClasses =
	"inline-flex min-h-[2.75rem] w-full items-center justify-center gap-2 rounded-full bg-purple-500 px-5 py-3 text-sm font-semibold text-white shadow-md transition hover:bg-purple-600 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-purple-400 sm:w-auto sm:text-base";
---

{href ? (
	<a href={href} target={target} rel={rel} class={baseClasses}>
		<slot />
	</a>
) : (
	<button type="button" class={baseClasses}>
		<slot />
	</button>
)}

<script is:inline>
	if (typeof window !== 'undefined') {
		const script = document.currentScript;
		const button = script?.previousElementSibling;

		if (button instanceof HTMLButtonElement) {
			button.addEventListener('click', async () => {
				const { default: confetti } = await import('canvas-confetti');
				confetti();
			});
		}
	}
</script>
